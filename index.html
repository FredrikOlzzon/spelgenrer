<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>N√∂rdliv ‚Äì Spelpreferenser</title>

  <style>
    :root {
      --bg:#0e0e11;
      --panel:#18181f;
      --text:#eaeaf0;
      --muted:#a0a0b0;
      --love:#4ade80;
      --open:#facc15;
      --avoid:#f87171;
      --border:#2a2a35;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:system-ui,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    header{
      background:linear-gradient(90deg,#000,#111);
      border-bottom:1px solid var(--border);
      padding:20px;
    }
.header-logo-right {
  margin-left: auto;
}
    .header-inner{
      max-width:1300px;
      margin:auto;
      display:flex;
      gap:20px;
      align-items:center;
      flex-wrap:wrap;
    }

    header img{height:60px}

    h1{margin:0;font-size:2rem}

    .top-nav{
      margin-left:auto;
      display:flex;
      gap:12px;
    }

    .top-nav a{
      text-decoration:none;
      padding:8px 14px;
      background:#f2f2f2;
      border-radius:6px;
      color:#333;
      font-weight:bold;
    }

    main{
      max-width:1300px;
      margin:auto;
      padding:30px 20px;
    }

    h2{
      margin-top:0;
      border-bottom:1px solid var(--border);
      padding-bottom:6px;
    }

    .top-filter{
      background:var(--panel);
      padding:20px;
      border-radius:10px;
      margin-bottom:30px;
      border:1px solid var(--border);
    }

    .filter-row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    select,button{
      background:#111;
      color:var(--text);
      border:1px solid var(--border);
      padding:8px;
      border-radius:6px;
    }

    button{cursor:pointer}

    .container{
      display:grid;
      grid-template-columns:260px 1fr;
      gap:30px;
    }

    .personlista{
      background:var(--panel);
      padding:15px;
      border-radius:10px;
      border:1px solid var(--border);
    }

    .personlista button{
      width:100%;
      margin-bottom:6px;
    }

    #resultat{
      background:var(--panel);
      padding:20px;
      border-radius:10px;
      border:1px solid var(--border);
    }

    .kolumner{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:20px;
      margin-top:15px;
    }

    .kolumn{
      background:#111;
      padding:15px;
      border-radius:8px;
      border:1px solid var(--border);
    }

    .alskar h3{color:var(--love)}
    .oppen h3{color:var(--open)}
    .undviker h3{color:var(--avoid)}

    ul{margin:0;padding-left:18px}
    li{color:var(--muted);margin-bottom:4px}

footer{
  margin-top:40px;
  padding:20px;
  text-align:center;
  color:var(--muted);
}

/* ===== TOOL INFO TEXT ===== */
.tool-info {
  background: rgba(255,255,255,0.02);
  padding: 16px 18px;
  border-radius: 8px;
  border: 1px solid var(--border);
}

.tool-info p {
  margin: 0 0 10px 0;
}

.tool-info hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 14px 0;
}

.tool-info-small {
  font-size: 0.85rem;
  color: var(--muted);
}

.tool-info-list {
  margin: 6px 0 12px 18px;
  padding: 0;
}

.tool-info-list li {
  margin-bottom: 4px;
  color: var(--text);
}


	.pc-tier {
  background:#0f172a;
  border:1px solid #334155;
  border-radius:8px;
  padding:10px 14px;
  margin-bottom:18px;
  font-weight:600;
}

.pc-tier.low { color:#f87171; }
.pc-tier.mid { color:#facc15; }
.pc-tier.high { color:#4ade80; }
.pc-tier.extreme { color:#38bdf8; } /* üîµ EXTREME */

.pc-specs {
  background:#020617;
  border:1px solid #334155;
  border-radius:8px;
  padding:12px 14px;
  margin-bottom:20px;
}

.pc-specs h4 {
  margin:0 0 8px 0;
  font-size:0.95rem;
  color:#93c5fd;
}

.pc-specs ul {
  list-style:none;
  padding:0;
  margin:0;
}

.pc-specs li {
  margin-bottom:4px;
  color:#cbd5f5;
  font-size:0.9rem;
}

/* ===== PC-TIER FILTER ===== */

#pcTierFilter.low {
  border-color:#f87171;
  color:#f87171;
}

#pcTierFilter.mid {
  border-color:#facc15;
  color:#facc15;
}

#pcTierFilter.high {
  border-color:#4ade80;
  color:#4ade80;
}

#pcTierFilter.extreme {
  border-color:#38bdf8;
  color:#38bdf8;
}

/* Varningstext */
.pc-tier-warning {
  margin-top:8px;
  font-size:0.85rem;
  color:#f87171;
}


  </style>
</head>

<body>

<header>
 <div class="header-inner">
  <img src="Logo_Nerdlife.png">
  <h1>Spelpreferenser</h1>

  <nav class="top-nav">
    <a href="index.html">üë§ Personvy</a>
    <a href="ej-valda.html">üö´ Ej valda</a>
    <a href="heatmap.html">üî• Heatmap</a>
    <a href="statistik.html">üìä Statistik</a>
  </nav>

  <img src="LOGOTYP-Prototyp-2023-pureLOGO-.png" class="header-logo-right">
</div>
</header>

<main>

  <!-- GENRE + PLATTFORM -->
  <div class="top-filter">
<div class="tool-info">
  <p>
    Detta verktyg √§r till f√∂r att ni <strong>redakt√∂rer</strong> l√§ttare ska kunna hitta
    r√§tt spel f√∂r r√§tt person. Kategorierna <strong>√Ñlskar</strong>, <strong>√ñppen</strong> och
    <strong>Undviker</strong> √§r <em>preferenser</em> ‚Äì <em>inte</em> absoluta regler.
  </p>
  <p>
    Bara f√∂r att n√•gon har vissa spelgenrer markerade som
    <strong>Undviker</strong> inneb√§r det <strong>inte</strong> att vi automatiskt
    avst√•r fr√•n att fr√•ga dem om s√•dana spel.
    Det √§r ett st√∂d f√∂r att navigera smartare, inte ett f√∂rbud.
  </p>

  <p>
    I slut√§nden √§r det alltid ett
    <strong>redaktionellt beslut</strong> vilka personer som tillfr√•gas,
    <strong>oavsett</strong> var ett spel hamnar sett till spelgenrepreferens.
  </p>

  <hr>

  <p class="tool-info-small">
    Fullst√§ndiga kategorinamn:
  </p>

  <ul class="tool-info-list">
    <li><strong>Spelgenrer ni verkligen √§lskar</strong></li>
    <li><strong>Spelgenrer ni √§r √∂ppna f√∂r att testa eller tycker √§r okej</strong></li>
    <li><strong>Spelgenrer ni har sv√•rt f√∂r / helst undviker ‚Äì om m√∂jligt</strong></li>
  </ul>

  <p class="tool-info-small">
    Observera direktl√§nken <strong>‚ÄúEj valda‚Äù</strong> h√∂gst upp ‚Äì vissa recensenter
    har spelgenrer som inte placerats i n√•gon kategori.
  </p>
</div>


    <h2>üéÆ Filtrera p√• genre</h2>

<div class="filter-row">
  <select id="genreSelect">
    <option value="">‚Äì V√§lj genre ‚Äì</option>
  </select>

  <select id="plattformGenre">
    <option value="alla">Alla plattformar</option>
    <option value="PC">PC</option>
    <option value="Playstation 5">PlayStation 5</option>
    <option value="Xbox Series S|X">Xbox Series S|X</option>
    <option value="Nintendo Switch">Nintendo Switch</option>
    <option value="Switch 2">Switch 2</option>
  </select>

  <!-- ‚úÖ PC-TIER ‚Äì H√ÑR -->
  <select id="pcTierFilter" style="display:none">
  <option value="">Alla PC-tier</option>
  <option value="low">Low</option>
  <option value="mid">Mid</option>
  <option value="high">High</option>
  <option value="extreme">Extreme</option>
</select>

<div id="pcTierWarning" class="pc-tier-warning" style="display:none">
  ‚ö†Ô∏è Low tier ‚Äì dubbelkolla systemkrav. Endast l√§ttare spel rekommenderas.
</div>


  <button id="visaGenreBtn">Visa</button>
</div>

    <div id="genreResultat"></div>

    <hr style="margin:25px 0;border-color:#2a2a35">

    <!-- PLATTFORM ‚Üí GENRER -->
<div class="plattform-genrer" style="display:none">
  <h3>üßπ Visa genrer per plattform</h3>

  <div class="filter-row">
    <select id="plattformOnly">
      <option value="">‚Äì V√§lj plattform ‚Äì</option>
      <option value="PC">PC</option>
      <option value="Playstation 5">PlayStation 5</option>
      <option value="Xbox Series S|X">Xbox Series S|X</option>
      <option value="Nintendo Switch">Nintendo Switch</option>
	  <option value="Switch 2">Switch 2</option>
    </select>

    <button id="filtreraGenrerBtn">Filtrera genrer</button>
  </div>

  <div id="plattformGenreResultat"></div>
</div>

  <!-- PERSONVY -->
  <div class="container">

    <div class="personlista">
      <h2>üë§ Personer</h2>
      <div id="personButtons"></div>
    </div>

    <div id="resultat">
      <h2>V√§lj en person</h2>
      <p class="muted">Klicka p√• ett namn.</p>
    </div>

  </div>

</main>

<footer>N√∂rdliv ‚Äì Spelpreferensanalys</footer>

<script src="data.js"></script>

<script>
const buttonsDiv=document.getElementById("personButtons");
const resultatDiv=document.getElementById("resultat");
const genreSelect=document.getElementById("genreSelect");

/* ===== PERSONKNAPPAR ===== */
Object.keys(DATA.personerData).forEach(p=>{
  const b=document.createElement("button");
  b.textContent=p;
  b.onclick=()=>visaPerson(p);
  buttonsDiv.appendChild(b);
});
const plattformSelect = document.getElementById("plattformGenre");
const pcTierSelect = document.getElementById("pcTierFilter");

plattformSelect.addEventListener("change", () => {
  if (plattformSelect.value === "PC") {
    pcTierSelect.style.display = "inline-block";
  } else {
    pcTierSelect.style.display = "none";
    pcTierSelect.value = ""; // nollst√§ll
  }
});

const pcTierWarning = document.getElementById("pcTierWarning");

pcTierSelect.addEventListener("change", () => {
  // Rensa gamla klasser
  pcTierSelect.classList.remove("low","mid","high","extreme");

  const tier = pcTierSelect.value;

  if (tier) {
    pcTierSelect.classList.add(tier);
  }

  // Visa varning endast f√∂r low
  if (tier === "low") {
    pcTierWarning.style.display = "block";
  } else {
    pcTierWarning.style.display = "none";
  }
});

/* ===== FYLL GENRER ===== */
const allaGenrer=new Set();
Object.values(DATA.personerData).forEach(p=>{
  [...p.alskar,...p.oppen,...p.undviker].forEach(g=>allaGenrer.add(g));
});
[...allaGenrer].sort((a,b)=>a.localeCompare(b,"sv")).forEach(g=>{
  const o=document.createElement("option");
  o.value=o.textContent=g;
  genreSelect.appendChild(o);
});

/* ===== VISA GENRE ===== */
document.getElementById("visaGenreBtn").onclick=()=>{
  const genre=genreSelect.value;
  const plattform=document.getElementById("plattformGenre").value;
  if(!genre)return;
  
  const pcTier = pcTierSelect.value;

  const A=[],O=[],U=[];
  Object.entries(DATA.personerData).forEach(([p,d])=>{
    if (plattform !== "alla") {
  if (!d.plattformar || !d.plattformar.includes(plattform)) return;

  if (
    plattform === "PC" &&
    pcTier &&
    d.pcTier !== pcTier
  ) return;
}
    if(d.alskar.includes(genre))A.push(p);
    if(d.oppen.includes(genre))O.push(p);
    if(d.undviker.includes(genre))U.push(p);
  });

  document.getElementById("genreResultat").innerHTML=`
    <h3>${genre}</h3>
    <div class="kolumner">
      <div class="kolumn alskar"><h3>‚ù§Ô∏è √Ñlskar</h3>${lista(A)}</div>
      <div class="kolumn oppen"><h3>üëç √ñppen</h3>${lista(O)}</div>
      <div class="kolumn undviker"><h3>üö´ Undviker</h3>${lista(U)}</div>
    </div>`;
};

/* ===== PLATTFORM ‚Üí GENRER ===== */
document.getElementById("filtreraGenrerBtn").onclick=()=>{
  const pl=document.getElementById("plattformOnly").value;
  if(!pl)return;

  const counter={};
  Object.values(DATA.personerData).forEach(d=>{
    if(!d.plattformar||!d.plattformar.includes(pl))return;
    [...d.alskar,...d.oppen].forEach(g=>counter[g]=(counter[g]||0)+1);
  });

  document.getElementById("plattformGenreResultat").innerHTML=`
    <ul>${Object.entries(counter).sort((a,b)=>b[1]-a[1])
      .map(([g,c])=>`<li>${g} (${c})</li>`).join("")}</ul>`;
	  
};


/* ===== PERSONVY ===== */
function visaPerson(p){
  const d = DATA.personerData[p];

  /* ===== PC-TIER ===== */
  let pcTierHTML = "";
  if (d.pcTier) {
    const tierLabel = {
      low: "üñ•Ô∏è PC ‚Äì Low tier",
      mid: "üñ•Ô∏è PC ‚Äì Mid tier",
      high: "üñ•Ô∏è PC ‚Äì High tier",
      extreme: "üöÄ PC ‚Äì Extreme tier"
    };

    pcTierHTML = `
      <div class="pc-tier ${d.pcTier}">
        ${tierLabel[d.pcTier] || "üñ•Ô∏è PC ‚Äì Ok√§nd niv√•"}
      </div>
    `;
  }

  /* ===== PC-SPECS ===== */
  let pcSpecsHTML = `
    <div class="pc-specs">
      <h4>üñ•Ô∏è PC-h√•rdvara</h4>
      <em>Ingen speldator registrerad</em>
    </div>
  `;

  if (d.pc) {
    pcSpecsHTML = `
      <div class="pc-specs">
        <h4>üñ•Ô∏è PC-h√•rdvara</h4>
        <ul>
          <li><strong>CPU:</strong> ${d.pc.cpu}</li>
          <li><strong>GPU:</strong> ${d.pc.gpu}</li>
          <li><strong>RAM:</strong> ${d.pc.ram} GB</li>
          ${d.pc.notes ? `<li><em>${d.pc.notes}</em></li>` : ""}
        </ul>
      </div>
    `;
  }

  /* ===== RENDER ===== */
  resultatDiv.innerHTML = `
    <h2>${p}</h2>
    ${pcTierHTML}
    ${pcSpecsHTML}
    <div class="kolumner">
      <div class="kolumn alskar"><h3>‚ù§Ô∏è √Ñlskar</h3>${lista(d.alskar)}</div>
      <div class="kolumn oppen"><h3>üëç √ñppen</h3>${lista(d.oppen)}</div>
      <div class="kolumn undviker"><h3>üö´ Undviker</h3>${lista(d.undviker)}</div>
    </div>
  `;
}



function lista(a){return a.length?`<ul>${a.map(i=>`<li>${i}</li>`).join("")}</ul>`:"<em>Ingen</em>";}
</script>

</body>
</html>





