<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>NÃ¶rdliv â€“ Spelpreferenser</title>

  <style>
    :root {
      --bg:#0e0e11;
      --panel:#18181f;
      --text:#eaeaf0;
      --muted:#a0a0b0;
      --love:#4ade80;
      --open:#facc15;
      --avoid:#f87171;
      --border:#2a2a35;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:system-ui,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    header{
      background:linear-gradient(90deg,#000,#111);
      border-bottom:1px solid var(--border);
      padding:20px;
    }

    .header-inner{
      max-width:1300px;
      margin:auto;
      display:flex;
      gap:20px;
      align-items:center;
      flex-wrap:wrap;
    }

    header img{height:60px}

    h1{margin:0;font-size:2rem}

    .top-nav{
      margin-left:auto;
      display:flex;
      gap:12px;
    }

    .top-nav a{
      text-decoration:none;
      padding:8px 14px;
      background:#f2f2f2;
      border-radius:6px;
      color:#333;
      font-weight:bold;
    }

    main{
      max-width:1300px;
      margin:auto;
      padding:30px 20px;
    }

    h2{
      margin-top:0;
      border-bottom:1px solid var(--border);
      padding-bottom:6px;
    }

    .top-filter{
      background:var(--panel);
      padding:20px;
      border-radius:10px;
      margin-bottom:30px;
      border:1px solid var(--border);
    }

    .filter-row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    select,button{
      background:#111;
      color:var(--text);
      border:1px solid var(--border);
      padding:8px;
      border-radius:6px;
    }

    button{cursor:pointer}

    .container{
      display:grid;
      grid-template-columns:260px 1fr;
      gap:30px;
    }

    .personlista{
      background:var(--panel);
      padding:15px;
      border-radius:10px;
      border:1px solid var(--border);
    }

    .personlista button{
      width:100%;
      margin-bottom:6px;
    }

    #resultat{
      background:var(--panel);
      padding:20px;
      border-radius:10px;
      border:1px solid var(--border);
    }

    .kolumner{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:20px;
      margin-top:15px;
    }

    .kolumn{
      background:#111;
      padding:15px;
      border-radius:8px;
      border:1px solid var(--border);
    }

    .alskar h3{color:var(--love)}
    .oppen h3{color:var(--open)}
    .undviker h3{color:var(--avoid)}

    ul{margin:0;padding-left:18px}
    li{color:var(--muted);margin-bottom:4px}

    footer{
      margin-top:40px;
      padding:20px;
      text-align:center;
      color:var(--muted);
    }
	.pc-tier {
  background:#0f172a;
  border:1px solid #334155;
  border-radius:8px;
  padding:10px 14px;
  margin-bottom:18px;
  font-weight:600;
}

.pc-tier.low { color:#f87171; }
.pc-tier.mid { color:#facc15; }
.pc-tier.high { color:#4ade80; }
.pc-tier.extreme { color:#38bdf8; } /* ğŸ”µ EXTREME */

.pc-specs {
  background:#020617;
  border:1px solid #334155;
  border-radius:8px;
  padding:12px 14px;
  margin-bottom:20px;
}

.pc-specs h4 {
  margin:0 0 8px 0;
  font-size:0.95rem;
  color:#93c5fd;
}

.pc-specs ul {
  list-style:none;
  padding:0;
  margin:0;
}

.pc-specs li {
  margin-bottom:4px;
  color:#cbd5f5;
  font-size:0.9rem;
}


  </style>
</head>

<body>

<header>
  <div class="header-inner">
    <img src="Logo_Nerdlife.png">
    <img src="LOGOTYP-Prototyp-2023-pureLOGO-.png">
    <h1>Spelpreferenser</h1>

    <nav class="top-nav">
      <a href="index.html">ğŸ‘¤ Personvy</a>
      <a href="statistik.html">ğŸ“Š Statistik</a>
      <a href="heatmap.html">ğŸ”¥ Heatmap</a>
      <a href="ej-valda.html">ğŸš« Ej valda</a>
    </nav>
  </div>
</header>

<main>

  <!-- GENRE + PLATTFORM -->
  <div class="top-filter">
    <h2>ğŸ® Filtrera pÃ¥ genre</h2>

<div class="filter-row">
  <select id="genreSelect">
    <option value="">â€“ VÃ¤lj genre â€“</option>
  </select>

  <select id="plattformGenre">
    <option value="alla">Alla plattformar</option>
    <option value="PC">PC</option>
    <option value="Playstation 5">PlayStation 5</option>
    <option value="Xbox Series S|X">Xbox Series S|X</option>
    <option value="Nintendo Switch">Nintendo Switch</option>
    <option value="Switch 2">Switch 2</option>
  </select>

  <!-- âœ… PC-TIER â€“ HÃ„R -->
  <select id="pcTierFilter" style="display:none">
    <option value="">Alla PC-tier</option>
    <option value="low">Low</option>
    <option value="mid">Mid</option>
    <option value="high">High</option>
    <option value="extreme">Extreme</option>
  </select>

  <button id="visaGenreBtn">Visa</button>
</div>

    <div id="genreResultat"></div>

    <hr style="margin:25px 0;border-color:#2a2a35">

  <option value="">Alla PC-tier</option>
  <option value="low">Low</option>
  <option value="mid">Mid</option>
  <option value="high">High</option>
  <option value="extreme">Extreme</option>
</select>

    <!-- PLATTFORM â†’ GENRER -->
<div class="plattform-genrer" style="display:none">
  <h3>ğŸ§¹ Visa genrer per plattform</h3>

  <div class="filter-row">
    <select id="plattformOnly">
      <option value="">â€“ VÃ¤lj plattform â€“</option>
      <option value="PC">PC</option>
      <option value="Playstation 5">PlayStation 5</option>
      <option value="Xbox Series S|X">Xbox Series S|X</option>
      <option value="Nintendo Switch">Nintendo Switch</option>
	  <option value="Switch 2">Switch 2</option>
    </select>

    <button id="filtreraGenrerBtn">Filtrera genrer</button>
  </div>

  <div id="plattformGenreResultat"></div>
</div>

  <!-- PERSONVY -->
  <div class="container">

    <div class="personlista">
      <h2>ğŸ‘¤ Personer</h2>
      <div id="personButtons"></div>
    </div>

    <div id="resultat">
      <h2>VÃ¤lj en person</h2>
      <p class="muted">Klicka pÃ¥ ett namn.</p>
    </div>

  </div>

</main>

<footer>NÃ¶rdliv â€“ Spelpreferensanalys</footer>

<script src="data.js"></script>

<script>
const buttonsDiv=document.getElementById("personButtons");
const resultatDiv=document.getElementById("resultat");
const genreSelect=document.getElementById("genreSelect");

/* ===== PERSONKNAPPAR ===== */
Object.keys(DATA.personerData).forEach(p=>{
  const b=document.createElement("button");
  b.textContent=p;
  b.onclick=()=>visaPerson(p);
  buttonsDiv.appendChild(b);
});
const plattformSelect = document.getElementById("plattformGenre");
const pcTierSelect = document.getElementById("pcTierFilter");

plattformSelect.addEventListener("change", () => {
  if (plattformSelect.value === "PC") {
    pcTierSelect.style.display = "inline-block";
  } else {
    pcTierSelect.style.display = "none";
    pcTierSelect.value = ""; // nollstÃ¤ll
  }
});


/* ===== FYLL GENRER ===== */
const allaGenrer=new Set();
Object.values(DATA.personerData).forEach(p=>{
  [...p.alskar,...p.oppen,...p.undviker].forEach(g=>allaGenrer.add(g));
});
[...allaGenrer].sort((a,b)=>a.localeCompare(b,"sv")).forEach(g=>{
  const o=document.createElement("option");
  o.value=o.textContent=g;
  genreSelect.appendChild(o);
});

/* ===== VISA GENRE ===== */
document.getElementById("visaGenreBtn").onclick=()=>{
  const genre=genreSelect.value;
  const plattform=document.getElementById("plattformGenre").value;
  if(!genre)return;
  
  const pcTier = pcTierSelect.value;

  const A=[],O=[],U=[];
  Object.entries(DATA.personerData).forEach(([p,d])=>{
    if (plattform !== "alla") {
  if (!d.plattformar || !d.plattformar.includes(plattform)) return;

  if (
    plattform === "PC" &&
    pcTier &&
    d.pcTier !== pcTier
  ) return;
}
    if(d.alskar.includes(genre))A.push(p);
    if(d.oppen.includes(genre))O.push(p);
    if(d.undviker.includes(genre))U.push(p);
  });

  document.getElementById("genreResultat").innerHTML=`
    <h3>${genre}</h3>
    <div class="kolumner">
      <div class="kolumn alskar"><h3>â¤ï¸ Ã„lskar</h3>${lista(A)}</div>
      <div class="kolumn oppen"><h3>ğŸ‘ Ã–ppen</h3>${lista(O)}</div>
      <div class="kolumn undviker"><h3>ğŸš« Undviker</h3>${lista(U)}</div>
    </div>`;
};

/* ===== PLATTFORM â†’ GENRER ===== */
document.getElementById("filtreraGenrerBtn").onclick=()=>{
  const pl=document.getElementById("plattformOnly").value;
  if(!pl)return;

  const counter={};
  Object.values(DATA.personerData).forEach(d=>{
    if(!d.plattformar||!d.plattformar.includes(pl))return;
    [...d.alskar,...d.oppen].forEach(g=>counter[g]=(counter[g]||0)+1);
  });

  document.getElementById("plattformGenreResultat").innerHTML=`
    <ul>${Object.entries(counter).sort((a,b)=>b[1]-a[1])
      .map(([g,c])=>`<li>${g} (${c})</li>`).join("")}</ul>`;
	  
};


/* ===== PERSONVY ===== */
function visaPerson(p){
  const d = DATA.personerData[p];

  /* ===== PC-TIER ===== */
  let pcTierHTML = "";
  if (d.pcTier) {
    const tierLabel = {
      low: "ğŸ–¥ï¸ PC â€“ Low tier",
      mid: "ğŸ–¥ï¸ PC â€“ Mid tier",
      high: "ğŸ–¥ï¸ PC â€“ High tier",
      extreme: "ğŸš€ PC â€“ Extreme tier"
    };

    pcTierHTML = `
      <div class="pc-tier ${d.pcTier}">
        ${tierLabel[d.pcTier] || "ğŸ–¥ï¸ PC â€“ OkÃ¤nd nivÃ¥"}
      </div>
    `;
  }

  /* ===== PC-SPECS ===== */
  let pcSpecsHTML = `
    <div class="pc-specs">
      <h4>ğŸ–¥ï¸ PC-hÃ¥rdvara</h4>
      <em>Ingen speldator registrerad</em>
    </div>
  `;

  if (d.pc) {
    pcSpecsHTML = `
      <div class="pc-specs">
        <h4>ğŸ–¥ï¸ PC-hÃ¥rdvara</h4>
        <ul>
          <li><strong>CPU:</strong> ${d.pc.cpu}</li>
          <li><strong>GPU:</strong> ${d.pc.gpu}</li>
          <li><strong>RAM:</strong> ${d.pc.ram} GB</li>
          ${d.pc.notes ? `<li><em>${d.pc.notes}</em></li>` : ""}
        </ul>
      </div>
    `;
  }

  /* ===== RENDER ===== */
  resultatDiv.innerHTML = `
    <h2>${p}</h2>
    ${pcTierHTML}
    ${pcSpecsHTML}
    <div class="kolumner">
      <div class="kolumn alskar"><h3>â¤ï¸ Ã„lskar</h3>${lista(d.alskar)}</div>
      <div class="kolumn oppen"><h3>ğŸ‘ Ã–ppen</h3>${lista(d.oppen)}</div>
      <div class="kolumn undviker"><h3>ğŸš« Undviker</h3>${lista(d.undviker)}</div>
    </div>
  `;
}



function lista(a){return a.length?`<ul>${a.map(i=>`<li>${i}</li>`).join("")}</ul>`:"<em>Ingen</em>";}
</script>

</body>
</html>
